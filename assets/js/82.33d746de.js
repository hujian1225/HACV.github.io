(window.webpackJsonp=window.webpackJsonp||[]).push([[82],{255:function(t,e,_){"use strict";_.r(e);var r=_(0),v=Object(r.a)({},(function(){var t=this,e=t.$createElement,_=t._self._c||e;return _("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),t._m(6),t._v(" "),t._m(7),t._v(" "),_("hr"),t._v(" "),t._m(8),t._v(" "),_("hr"),t._v(" "),_("ul",[_("li",[_("code",[t._v(".bss")]),t._v("：\n"),_("ul",[t._m(9),t._v(" "),_("li",[t._v("存放程序中『初始化为0』的"),_("code",[t._v("全局变量")]),t._v("和"),_("code",[t._v("静态变量（全局+局部）")]),_("font",{staticStyle:{background:"yellow"}},[t._v("听说这样放的原因是：初始化为0，这个可以被优化为这个")])],1)])]),t._v(" "),t._m(10)]),t._v(" "),_("hr"),t._v(" "),t._m(11),t._v(" "),_("hr"),t._v(" "),t._m(12),t._v(" "),_("hr"),t._v(" "),_("p",[_("font",{staticStyle:{background:"yellow"}},[t._v("注意")]),t._v("：")],1),t._v(" "),_("ul",[t._m(13),t._v(" "),t._m(14),t._v(" "),_("li",[t._v("3）"),_("font",{staticStyle:{background:"yellow"}},[t._v("我们在分析C语言和C++的底层原理的时候，用上面的粗略的就完全足够了，没必要用太详细的")])],1)]),t._v(" "),t._m(15),t._v(" "),_("p",[t._v("计算机工作流程")]),t._v(" "),t._m(16),t._v(" "),_("p",[t._v("以Linux系统为例")]),t._v(" "),t._m(17),t._v(" "),_("p",[t._v("补充：")]),t._v(" "),t._m(18),t._v(" "),t._m(19),t._v(" "),t._m(20),t._v(" "),t._m(21),t._v(" "),t._m(22),t._v(" "),_("ul",[_("li",[_("a",{attrs:{href:"https://www.zhihu.com/question/36103513",target:"_blank",rel:"noopener noreferrer"}},[t._v("知乎"),_("OutboundLink")],1),t._v("具体链接到一个国外的："),_("a",{attrs:{href:"https://manybutfinite.com/post/anatomy-of-a-program-in-memory/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://manybutfinite.com/post/anatomy-of-a-program-in-memory/"),_("OutboundLink")],1)])]),t._v(" "),t._m(23),t._v(" "),t._m(24),t._v(" "),t._m(25),t._v(" "),t._m(26),t._v(" "),_("ul",[_("li",[t._v("《"),_("a",{attrs:{href:"https://book.douban.com/subject/3652388/",target:"_blank",rel:"noopener noreferrer"}},[t._v("程序员的自我修养"),_("OutboundLink")],1),t._v("》， 俞甲子 / 石凡 / 潘爱民")]),t._v(" "),_("li",[t._v("《程序员的自我修养》—全书思维导图，"),_("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/111682188",target:"_blank",rel:"noopener noreferrer"}},[t._v("博客"),_("OutboundLink")],1),t._v("，知乎")])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{attrs:{id:"虚拟内存空间分布图"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#虚拟内存空间分布图"}},[this._v("#")]),this._v(" 虚拟内存空间分布图")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"_01-学习内存管理意义"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_01-学习内存管理意义"}},[this._v("#")]),this._v(" 01.学习内存管理意义")])},function(){var t=this,e=t.$createElement,_=t._self._c||e;return _("p",[t._v("1）C语言和"),_("code",[t._v("C++")]),t._v("底层原理分析利器"),_("br"),t._v("\n2）将我学过的"),_("code",[t._v("计算机组成原理")]),t._v("，"),_("code",[t._v("汇编")]),t._v("，"),_("code",[t._v("C语言")]),t._v("，"),_("code",[t._v("C++")]),t._v("和"),_("code",[t._v("操作系统")]),t._v("能够很好的串起来")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"_02-程序加载后的虚拟内存分布"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_02-程序加载后的虚拟内存分布"}},[this._v("#")]),this._v(" 02.程序加载后的虚拟内存分布")])},function(){var t=this.$createElement,e=this._self._c||t;return e("blockquote",[e("ul",[e("li",[this._v("环境：\n32位，Linux，ELF格式文件")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_2-1-虚拟内存空间大致分布"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-虚拟内存空间大致分布"}},[this._v("#")]),this._v(" 2.1.虚拟内存空间大致分布")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/HACV/picture/img/%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98%E7%A9%BA%E9%97%B4%E5%88%86%E5%B8%83%E6%89%8B%E7%BB%9801.png",alt:"虚拟内存空间分布手绘01"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_2-2-从下到上进行说明"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-从下到上进行说明"}},[this._v("#")]),this._v(" 2.2.从下到上进行说明")])},function(){var t=this,e=t.$createElement,_=t._self._c||e;return _("ul",[_("li",[t._v("内核区：kernel映射到进程虚拟内存，但程序无法访问")]),t._v(" "),_("li",[_("code",[t._v("argv")]),t._v(","),_("code",[t._v("environ")]),t._v(":命令行参数和环境变量\n"),_("ul",[_("li",[t._v("其实就比如 "),_("code",[t._v("ping -t www.baidu.com")]),t._v("，我们也可以写命令行的参数")])])]),t._v(" "),_("li",[t._v("Stack（栈/堆栈，向低地址生长）：\n"),_("ul",[_("li",[t._v("程序中，『非静态的局部变量』放的地方")]),t._v(" "),_("li",[t._v("吐槽，叫栈就好了，前面还加个堆，以前入门的时候，还在这个到底是堆，还是栈。。。")])])]),t._v(" "),_("li",[t._v("共享库：\n"),_("ul",[_("li",[t._v("比如，Linux你所制作的.so（动态库），加载的位置就是在这。")]),t._v(" "),_("li",[t._v("内存映射段，文件映射（包括动态库）和匿名映射。示例：/lib/libc。所以")])])]),t._v(" "),_("li",[t._v("heap（堆，向高地址生长）：\n"),_("ul",[_("li",[t._v("比如C语言中"),_("code",[t._v("malloc")]),t._v("的，"),_("code",[t._v("C++")]),t._v("中"),_("code",[t._v("new")])]),t._v(" "),_("li",[t._v("吐槽：这个堆和数据结构中的堆不一样，弄得那时候先学数据结构的我，看到这个，条件反射问最大堆还是最小堆...最后发现都不是..")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[this._v("『未初始化』的"),e("code",[this._v("全局变量")]),this._v("和"),e("code",[this._v("静态变量（全局+局部）")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[this._v("."),e("code",[this._v("data")]),this._v("（数据段）:\n"),e("ul",[e("li",[this._v("存放『已初始化』的"),e("code",[this._v("全局变量")]),this._v("和"),e("code",[this._v("静态变量（全局+局部）")])])])])},function(){var t=this,e=t.$createElement,_=t._self._c||e;return _("ul",[_("li",[_("code",[t._v(".rodata")]),t._v("（只读存储区，有书叫常量区）:\n"),_("ul",[_("li",[t._v("比如存放，『字符产常量』")])])]),t._v(" "),_("li",[_("code",[t._v(".text")]),t._v("（代码段，还叫"),_("code",[t._v(".code")]),t._v("）:\n"),_("ul",[_("li",[t._v("程序源代码编译之后的机器指令，放在这个代码段")]),t._v(" "),_("li",[t._v("吐槽：有的书上，把"),_("code",[t._v(".rodata")]),t._v("和"),_("code",[t._v(".text")]),t._v("统称为代码段，这些规定还真是。")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("其实这里，还有一个保留区：禁止访问，这也解释了我们\n"),e("ul",[e("li",[this._v("为什么不能给地址为0的地方写数据，不然就会产生段错误。")])])])])},function(){var t=this,e=t.$createElement,_=t._self._c||e;return _("li",[t._v("1）我为什么要将"),_("code",[t._v(".rodata")]),t._v("和"),_("code",[t._v(".text")]),t._v("这么画呢?\n"),_("ul",[_("li",[t._v("因为这两段区域的权限是read only的"),_("br"),t._v("\n将来在"),_("code",[t._v("链接")]),t._v("的时候，会把他们完成数据段合并，合并到一块")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[this._v("2）其实ELF文件，映射到虚拟内存空间（不存在，假象的，但是用来分析进程很有用）"),e("br"),this._v("\n不止以上，我画的这几个段，但那些和我们编程无关的话，比如，调试段，我们就没画了")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"_03-辨析：程序-进程-虚拟内存空间-物理内存空间"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_03-辨析：程序-进程-虚拟内存空间-物理内存空间"}},[this._v("#")]),this._v(" 03.辨析：程序+进程+虚拟内存空间+物理内存空间")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("程序→加载后→进程（进程实际不存在）（虚拟内存空间→映射→物理内存空间）")])])},function(){var t=this,e=t.$createElement,_=t._self._c||e;return _("ul",[_("li",[t._v("程序：比如，编译后的可执行文件"),_("code",[t._v("a.out")]),t._v("，是用ELF格式存储")]),t._v(" "),_("li",[t._v("进程和虚拟内存空间：执行程序，就会产生进程，产生进程的同时就产生了这个进程"),_("strong",[t._v("对应的")]),t._v("虚拟内存\n注意：进程是不存在的，但是我们可以通过，虚拟内存"),_("strong",[t._v("实际不存在")]),t._v("的，但是引入这个抽象的概念，能够简化我们汇编编程，C语言编程等程序设计。正是因为有虚拟内存，所以，我们才能在物理内存少于虚拟内存的地方，还能跑起来程序")]),t._v(" "),_("li",[t._v("物理内存空间：也就是我们的内存条，是"),_("strong",[t._v("实际存在")]),t._v("的。")])])},function(){var t=this,e=t.$createElement,_=t._self._c||e;return _("ul",[_("li",[t._v("我们想要获取进程的"),_("code",[t._v("进程id")]),t._v("啥的，可以通过"),_("code",[t._v("内核区")]),t._v("的"),_("strong",[t._v("PCB")])]),t._v(" "),_("li",[_("code",[t._v("虚拟内存")]),t._v("如何映射到"),_("code",[t._v("实际内存")]),t._v("？\n通过CPU中，有个硬件叫做"),_("code",[t._v("MMU")])]),t._v(" "),_("li",[t._v("如果r和w权限和r权限的那两个段的大小允许的话，\n我们会把他放到一个page(页）里面，\n在我们32位机上，一个页面的大小，是4KB\n这样的目的是为了节省内存，节省空问")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"_04-关于虚拟内存空间的画法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_04-关于虚拟内存空间的画法"}},[this._v("#")]),this._v(" 04.关于虚拟内存空间的画法")])},function(){var t=this.$createElement,e=this._self._c||t;return e("blockquote",[e("p",[this._v("下面展示了其他书籍上，关于虚拟内存空间的画法")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("《程序员的自我修养》P167")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/HACV/picture/img/%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98%E7%A9%BA%E9%97%B4%E5%88%86%E5%B8%8302.png",alt:"虚拟内存空间分布02"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/HACV/picture/img/%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98%E7%A9%BA%E9%97%B4%E5%88%86%E5%B8%83%E7%9F%A5%E4%B9%8E03.png",alt:"虚拟内存空间分布知乎03"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[e("p",[this._v("说明的问题：")])]),this._v(" "),e("li",[e("p",[this._v("栈的生长方式等的争论，这个其实取决于操作系统和硬件实现，但是"),e("strong",[this._v("业界目前面试等时候，还是默认用大多数机型的")]),this._v("，我前面写的那种的方式。")])]),this._v(" "),e("li",[e("p",[this._v("《CSAPP（深入理解计算机系统）》原书第2版，中文P554")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/HACV/picture/img/%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98%E7%A9%BA%E9%97%B4%E5%88%86%E5%B8%83CSAPP04.png",alt:"虚拟内存空间分布CSAPP04"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"参考资料"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[this._v("#")]),this._v(" 参考资料")])}],!1,null,null,null);e.default=v.exports}}]);