<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>NASM编译器常用指令 | HACV</title>
    <meta name="description" content="Personal Blog Website">
    <link rel="icon" href="/images/photo.jpg">
  <link rel="manifest" href="/images/photo.jpg">
  <link rel="apple-touch-icon" href="/images/photo.jpg">
  <meta http-quiv="pragma" cotent="no-cache">
  <meta http-quiv="pragma" cotent="no-cache,must-revalidate">
  <meta http-quiv="expires" cotent="0">
    
    <link rel="preload" href="/assets/css/0.styles.0dbae9ec.css" as="style"><link rel="preload" href="/assets/js/app.65c6717c.js" as="script"><link rel="preload" href="/assets/js/48.eac3805a.js" as="script"><link rel="prefetch" href="/assets/js/10.877a55b7.js"><link rel="prefetch" href="/assets/js/100.a222ada6.js"><link rel="prefetch" href="/assets/js/101.c43921fc.js"><link rel="prefetch" href="/assets/js/11.a50cd084.js"><link rel="prefetch" href="/assets/js/12.4f613f36.js"><link rel="prefetch" href="/assets/js/13.b6349c30.js"><link rel="prefetch" href="/assets/js/14.7ee96d39.js"><link rel="prefetch" href="/assets/js/15.1cd4416a.js"><link rel="prefetch" href="/assets/js/16.1d34b067.js"><link rel="prefetch" href="/assets/js/17.51677e82.js"><link rel="prefetch" href="/assets/js/18.ea56a77c.js"><link rel="prefetch" href="/assets/js/19.5bf109e0.js"><link rel="prefetch" href="/assets/js/2.ef8300fa.js"><link rel="prefetch" href="/assets/js/20.2c26a59b.js"><link rel="prefetch" href="/assets/js/21.a1fd0b54.js"><link rel="prefetch" href="/assets/js/22.6f98cda0.js"><link rel="prefetch" href="/assets/js/23.bbff78da.js"><link rel="prefetch" href="/assets/js/24.3e484053.js"><link rel="prefetch" href="/assets/js/25.3f4a5f65.js"><link rel="prefetch" href="/assets/js/26.ce0361f9.js"><link rel="prefetch" href="/assets/js/27.bf8eb072.js"><link rel="prefetch" href="/assets/js/28.3672c0da.js"><link rel="prefetch" href="/assets/js/29.41cc0c19.js"><link rel="prefetch" href="/assets/js/3.097212f4.js"><link rel="prefetch" href="/assets/js/30.b8bafb55.js"><link rel="prefetch" href="/assets/js/31.7b7fde4c.js"><link rel="prefetch" href="/assets/js/32.7f41d2e2.js"><link rel="prefetch" href="/assets/js/33.95a7ef36.js"><link rel="prefetch" href="/assets/js/34.0c9ed89f.js"><link rel="prefetch" href="/assets/js/35.ce701b23.js"><link rel="prefetch" href="/assets/js/36.f63306f5.js"><link rel="prefetch" href="/assets/js/37.c23f73e1.js"><link rel="prefetch" href="/assets/js/38.9f9ae58c.js"><link rel="prefetch" href="/assets/js/39.eeedf72c.js"><link rel="prefetch" href="/assets/js/4.804f4910.js"><link rel="prefetch" href="/assets/js/40.3bb56b05.js"><link rel="prefetch" href="/assets/js/41.085977ed.js"><link rel="prefetch" href="/assets/js/42.8e9761d6.js"><link rel="prefetch" href="/assets/js/43.f0012948.js"><link rel="prefetch" href="/assets/js/44.2bb3aad4.js"><link rel="prefetch" href="/assets/js/45.4b8a282e.js"><link rel="prefetch" href="/assets/js/46.4cfc8dc3.js"><link rel="prefetch" href="/assets/js/47.c2c7155e.js"><link rel="prefetch" href="/assets/js/49.0e30b8b1.js"><link rel="prefetch" href="/assets/js/5.b3e93cf0.js"><link rel="prefetch" href="/assets/js/50.e25f098a.js"><link rel="prefetch" href="/assets/js/51.b83c6091.js"><link rel="prefetch" href="/assets/js/52.2dee17f1.js"><link rel="prefetch" href="/assets/js/53.f25ea82e.js"><link rel="prefetch" href="/assets/js/54.bea53589.js"><link rel="prefetch" href="/assets/js/55.28a34913.js"><link rel="prefetch" href="/assets/js/56.be50a469.js"><link rel="prefetch" href="/assets/js/57.cff21887.js"><link rel="prefetch" href="/assets/js/58.1f5ba164.js"><link rel="prefetch" href="/assets/js/59.7fe62295.js"><link rel="prefetch" href="/assets/js/6.76a54562.js"><link rel="prefetch" href="/assets/js/60.f224a395.js"><link rel="prefetch" href="/assets/js/61.5db2158d.js"><link rel="prefetch" href="/assets/js/62.82e94ca5.js"><link rel="prefetch" href="/assets/js/63.07a248b2.js"><link rel="prefetch" href="/assets/js/64.ccec04a2.js"><link rel="prefetch" href="/assets/js/65.5bf93bdd.js"><link rel="prefetch" href="/assets/js/66.1df64a9e.js"><link rel="prefetch" href="/assets/js/67.4d4df9dd.js"><link rel="prefetch" href="/assets/js/68.a8c1746a.js"><link rel="prefetch" href="/assets/js/69.5d84fc9e.js"><link rel="prefetch" href="/assets/js/7.424e8efc.js"><link rel="prefetch" href="/assets/js/70.2c5d5582.js"><link rel="prefetch" href="/assets/js/71.25d26a7d.js"><link rel="prefetch" href="/assets/js/72.bf8b6cd2.js"><link rel="prefetch" href="/assets/js/73.4b222965.js"><link rel="prefetch" href="/assets/js/74.96fa9dfe.js"><link rel="prefetch" href="/assets/js/75.9899628b.js"><link rel="prefetch" href="/assets/js/76.b89b8d50.js"><link rel="prefetch" href="/assets/js/77.6c672ab3.js"><link rel="prefetch" href="/assets/js/78.78618cad.js"><link rel="prefetch" href="/assets/js/79.d894a151.js"><link rel="prefetch" href="/assets/js/8.6f52c20a.js"><link rel="prefetch" href="/assets/js/80.16092758.js"><link rel="prefetch" href="/assets/js/81.4c5a34ad.js"><link rel="prefetch" href="/assets/js/82.5f7e327a.js"><link rel="prefetch" href="/assets/js/83.eb3feba5.js"><link rel="prefetch" href="/assets/js/84.28445c05.js"><link rel="prefetch" href="/assets/js/85.2ac2804d.js"><link rel="prefetch" href="/assets/js/86.2c2486dc.js"><link rel="prefetch" href="/assets/js/87.7c0d0cb1.js"><link rel="prefetch" href="/assets/js/88.0f74e7b0.js"><link rel="prefetch" href="/assets/js/89.47d730bc.js"><link rel="prefetch" href="/assets/js/9.3583c964.js"><link rel="prefetch" href="/assets/js/90.d0850d65.js"><link rel="prefetch" href="/assets/js/91.cec4b42c.js"><link rel="prefetch" href="/assets/js/92.4f87967e.js"><link rel="prefetch" href="/assets/js/93.4433b003.js"><link rel="prefetch" href="/assets/js/94.3dfb4cc8.js"><link rel="prefetch" href="/assets/js/95.86d1e3d6.js"><link rel="prefetch" href="/assets/js/96.97b41e32.js"><link rel="prefetch" href="/assets/js/97.b260bbcb.js"><link rel="prefetch" href="/assets/js/98.82999578.js"><link rel="prefetch" href="/assets/js/99.e9dc86c2.js">
    <link rel="stylesheet" href="/assets/css/0.styles.0dbae9ec.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">HACV</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/07.InternalSkill/" class="nav-link router-link-active">⭐️硬件</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">🔋软件</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/02.DataStructureAndAlgorithm/" class="nav-link">🐾数据结构和算法</a></li><li class="dropdown-item"><!----> <a href="/03.OS/" class="nav-link">💻操作系统</a></li><li class="dropdown-item"><!----> <a href="/04.Net/" class="nav-link">☁️计算机网络</a></li><li class="dropdown-item"><!----> <a href="/05.SE/" class="nav-link">✅软件工程</a></li></ul></div></div><div class="nav-item"><a href="/06.SQL/" class="nav-link">⚡️数据库</a></div><div class="nav-item"><a href="/08.Tools/" class="nav-link">⚙️工具</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">🚀语言</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/09.Language/Cpp/" class="nav-link">⭐️C++</a></li><li class="dropdown-item"><!----> <a href="/09.Language/Java/" class="nav-link">☕️Java</a></li></ul></div></div><div class="nav-item"><a href="/10.SourceCode/" class="nav-link">⭐️源码剖析</a></div><div class="nav-item"><a href="https://github.com/HACV" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/07.InternalSkill/" class="nav-link router-link-active">⭐️硬件</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">🔋软件</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/02.DataStructureAndAlgorithm/" class="nav-link">🐾数据结构和算法</a></li><li class="dropdown-item"><!----> <a href="/03.OS/" class="nav-link">💻操作系统</a></li><li class="dropdown-item"><!----> <a href="/04.Net/" class="nav-link">☁️计算机网络</a></li><li class="dropdown-item"><!----> <a href="/05.SE/" class="nav-link">✅软件工程</a></li></ul></div></div><div class="nav-item"><a href="/06.SQL/" class="nav-link">⚡️数据库</a></div><div class="nav-item"><a href="/08.Tools/" class="nav-link">⚙️工具</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">🚀语言</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/09.Language/Cpp/" class="nav-link">⭐️C++</a></li><li class="dropdown-item"><!----> <a href="/09.Language/Java/" class="nav-link">☕️Java</a></li></ul></div></div><div class="nav-item"><a href="/10.SourceCode/" class="nav-link">⭐️源码剖析</a></div><div class="nav-item"><a href="https://github.com/HACV" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>NASM编译器常用指令</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/07.InternalSkill/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/03.NASM%E7%9A%84AT_T%E6%B1%87%E7%BC%96.html#目录" class="sidebar-link">目录</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/07.InternalSkill/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/03.NASM%E7%9A%84AT_T%E6%B1%87%E7%BC%96.html#_01-通用汇编指令" class="sidebar-link">01.通用汇编指令</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/07.InternalSkill/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/03.NASM%E7%9A%84AT_T%E6%B1%87%E7%BC%96.html#★分类" class="sidebar-link">★分类</a></li><li class="sidebar-sub-header"><a href="/07.InternalSkill/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/03.NASM%E7%9A%84AT_T%E6%B1%87%E7%BC%96.html#★1-1-数据传送指令" class="sidebar-link">★1.1.数据传送指令</a></li><li class="sidebar-sub-header"><a href="/07.InternalSkill/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/03.NASM%E7%9A%84AT_T%E6%B1%87%E7%BC%96.html#★1-2-算术和逻辑运算指令" class="sidebar-link">★1.2.算术和逻辑运算指令</a></li><li class="sidebar-sub-header"><a href="/07.InternalSkill/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/03.NASM%E7%9A%84AT_T%E6%B1%87%E7%BC%96.html#★1-3-控制流指令" class="sidebar-link">★1.3.控制流指令</a></li><li class="sidebar-sub-header"><a href="/07.InternalSkill/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/03.NASM%E7%9A%84AT_T%E6%B1%87%E7%BC%96.html#★1-4-其他指令" class="sidebar-link">★1.4.其他指令</a></li></ul></li><li><a href="/07.InternalSkill/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/03.NASM%E7%9A%84AT_T%E6%B1%87%E7%BC%96.html#_02-nasm编译指令" class="sidebar-link">02.NASM编译指令</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/07.InternalSkill/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/03.NASM%E7%9A%84AT_T%E6%B1%87%E7%BC%96.html#_03-cpu寄存器分类" class="sidebar-link">03.CPU寄存器分类</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/07.InternalSkill/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/03.NASM%E7%9A%84AT_T%E6%B1%87%E7%BC%96.html#_3-1-用户可见" class="sidebar-link">3.1.用户可见</a></li><li class="sidebar-sub-header"><a href="/07.InternalSkill/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/03.NASM%E7%9A%84AT_T%E6%B1%87%E7%BC%96.html#_3-2-用户不可见" class="sidebar-link">3.2.用户不可见</a></li></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="nasm编译器常用指令"><a href="#nasm编译器常用指令" class="header-anchor">#</a> NASM编译器常用指令</h1> <h2 id="目录"><a href="#目录" class="header-anchor">#</a> 目录</h2> <p>[TOC]</p> <ul><li><font style="background:yellow;">32位汇编为例，结合X86寄存器理解</font></li> <li><code>NASM用的是intel汇编语法，和Linux反汇编的有区别</code></li></ul> <h2 id="_01-通用汇编指令"><a href="#_01-通用汇编指令" class="header-anchor">#</a> 01.通用汇编指令</h2> <h3 id="★分类"><a href="#★分类" class="header-anchor">#</a> ★分类</h3> <p>汇编指令通常可以分为数据传送指令，算术和逻辑预算指令，控制流指令</p> <p><code>PS：我们的操作数是:寄存器，立即数，内存</code></p> <h3 id="★1-1-数据传送指令"><a href="#★1-1-数据传送指令" class="header-anchor">#</a> ★1.1.数据传送指令</h3> <ul><li>1）mov 目标操作数,源操作数</li></ul> <blockquote><ul><li><code>mov 寄存器,寄存器</code></li> <li><code>mov 寄存器,立即数</code></li> <li><code>mov 寄存器,内存</code></li> <li><code>mov 内存,寄存器</code></li> <li><code>mov 内存,立即数</code></li> <li><font style="background:yellow;">mov 内存直接到内存是不准的！！</font></li></ul></blockquote> <div class="language-asm line-numbers-mode"><pre class="language-text"><code>mov byte ptr[var],5
mov eax,ebx
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>2）push 操作数</li></ul> <blockquote><ul><li><code>push 寄存器</code>（注意要</li> <li><code>push 内存</code></li> <li><code>push 立即数</code></li></ul></blockquote> <div class="language-asm line-numbers-mode"><pre class="language-text"><code>push eax
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>3）pop 操作数</li></ul> <h3 id="★1-2-算术和逻辑运算指令"><a href="#★1-2-算术和逻辑运算指令" class="header-anchor">#</a> ★1.2.算术和逻辑运算指令</h3> <ul><li>1）加、减（add / <strong>sub</strong>tract，v.减去）</li></ul> <blockquote><ul><li><code>add/sub 目标操作数,被加/减的数字</code></li> <li><code>add/sub 寄存器,寄存器</code></li> <li><code>add/sub 寄存器,立即数</code></li> <li><code>add/sub 寄存器,内存</code></li> <li><code>add/sub 内存,寄存器</code></li> <li><code>add/sub 内存,立即数</code></li> <li><font style="background:yellow;">add/sub 内存,内存是不准的！！！</font></li></ul></blockquote> <div class="language-asm line-numbers-mode"><pre class="language-text"><code>sub eax,10		
;假设eax是变量，用C语言解释就是eax=eax-10
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>2）<code>带符号</code>乘法（<strong>mul</strong>tiplication,n.乘法）</li> <li>格式1）imul 目标操作数,操作数</li></ul> <blockquote><ul><li>imul 寄存器,寄存器</li> <li>imul 寄存器,内存</li> <li><font style="background:yellow;">Tips：只能是上面的，目标操作只能是寄存器</font></li></ul></blockquote> <ul><li>格式2）imul 目标操作数,操作数1,操作数2</li></ul> <blockquote><ul><li>imul 寄存器,寄存器,立即数</li> <li>imul 寄存器,内存,立即数</li></ul></blockquote> <div class="language-asm line-numbers-mode"><pre class="language-text"><code>;假设eax，edi是变量，用C语言解释就是eax=eax*edi
imul eax,edi
;假设eax，edi是变量，用C语言解释就是eax=edi*5
imul eax,edi,5
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>3)<code>带符号</code>除法（division,n.除法）</li> <li>idiv 除数操作数</li></ul> <blockquote><ul><li>idiv 寄存器</li> <li>idiv 内存</li></ul> <blockquote><ul><li><font style="background:yellow;">被除数在<code>edx:eax</code>中，此外，操作结果，<code>商送到eax</code>,<code>余数送到edx</code></font></li></ul></blockquote></blockquote> <div class="language-asm line-numbers-mode"><pre class="language-text"><code>idiv ebx
idiv dword ptr [var]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>4）自加和自减（<strong>inc</strong>rease,v.增加 / <strong>dec</strong>rease,v.减少）</li></ul> <blockquote><ul><li>inc/dec 操作数</li> <li>inc/dec 寄存器</li> <li>inc/dec 内存</li> <li><font style="background:yellow;">inc/dec 立即数显然是不准！！！</font></li></ul> <blockquote><ul><li>这就是C语言中<code>i++,--i</code>的汇编实现</li></ul></blockquote></blockquote> <ul><li>5）取负（<strong>neg</strong>ative，v.否定，adj.负面的）</li></ul> <blockquote><ul><li>neg 操作数</li> <li>neg 寄存器</li> <li>neg 内存</li> <li><font style="background:yellow;">neg  立即数	显然是不准！！！</font></li></ul></blockquote> <div class="language-asm line-numbers-mode"><pre class="language-text"><code>neg eax
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><font style="background:red;">位运算大类指令</font></p> <ul><li>6）按位取反（位翻转）指令（not）</li></ul> <blockquote><ul><li>not 操作数</li> <li><code>not 寄存器</code></li> <li><code>not 内存</code></li> <li><font style="background:yellow;">not  立即数	显然是不准！！！</font></li></ul></blockquote> <div class="language-asm line-numbers-mode"><pre class="language-text"><code>not byte ptr [var]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>7）<font style="background:yellow;">逻辑</font>移位指令（<strong>sh</strong>ift v.移动，转移）</li></ul> <blockquote><ul><li>shl/shr（left，逻辑左移/right，逻辑右移）</li> <li>shl/shr 被操作数,移位的位数的操作数</li></ul></blockquote> <div class="language-asm line-numbers-mode"><pre class="language-text"><code>shl eax,1
shr ebx,2  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li><p>8）<font style="background:yellow;">算术</font>移位指令（<strong>sh</strong>ift v.移动，转移）
（arithmetic，n.算术，算术运算）</p></li> <li><p>9）逻辑与，或，异或（and/or/xor）</p></li></ul> <div class="language-asm line-numbers-mode"><pre class="language-text"><code>and eax,0fH
or eax,0fH
xor edx,edx
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="★1-3-控制流指令"><a href="#★1-3-控制流指令" class="header-anchor">#</a> ★1.3.控制流指令</h3> <ul><li>1）循环(loop)（可以说是C语言中循环的汇编语言实现）</li></ul> <blockquote><ul><li>loop 地址</li></ul> <blockquote><ul><li>loop指令，在执行的时候，会顺序做两件事：（1）寄存器cx减一  （2）如果cx的内容不为0，则转移到指定的位置去执行，否则顺序执行后面的指令。</li></ul></blockquote></blockquote> <div class="language-asm line-numbers-mode"><pre class="language-text"><code>mov cx,5 ;循环次数
mov si,10 ;除数
digit:
     xor dx,dx
	 div si
	 mov [bx],dl ;保存数位
	 inc bx
	 loop digit
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li>2）跳转（jump)（可以说是C语言中goto的汇编语言实现）</li></ul> <blockquote><ul><li>jmp 标签所在地址</li></ul></blockquote> <div class="language-.asm line-numbers-mode"><pre class="language-text"><code>begin: 
add eax,1
jmp begin
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>3）比较和转移（可以说是C语言条件语句的汇编语言实现）</li></ul> <blockquote><ul><li>指令（1）cmp 操作数,操作数</li></ul> <blockquote><ul><li>cmp 寄存器,寄存器</li> <li>cmp 寄存器,立即数</li> <li>cmp 寄存器,内存</li> <li>cmp 内存,寄存器</li></ul> <blockquote><ul><li>比较两个操作数的值，并且根据结果，设置eflags寄存器中的条件码</li></ul></blockquote></blockquote> <ul><li>指令（2）j开头的转移指令</li></ul> <table><thead><tr><th>语法</th> <th>说明</th></tr></thead> <tbody><tr><td>je 标签</td> <td>jump when  <strong>equal</strong></td></tr> <tr><td>jne 标签</td> <td>jump when <strong>not equal</strong></td></tr> <tr><td>jz 标签</td> <td>jump when <strong>last reult was zero</strong></td></tr> <tr><td>jg 标签</td> <td>jump when <strong>greater than</strong></td></tr> <tr><td>jge 标签</td> <td>jump when <strong>greater than or equal to</strong></td></tr> <tr><td>jl 标签</td> <td>jump when <strong>less than</strong></td></tr> <tr><td>jle 标签</td> <td>jump when <strong>less than or equal to</strong></td></tr></tbody></table> <ul><li>代码样例</li></ul></blockquote> <div class="language-.asm line-numbers-mode"><pre class="language-text"><code>begin:
	inc ebx
	cmp eax,ebx		;比较
	jge begin		;当eax&gt;=ebx的时候，就跳转到begin
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>4）子程序调用（C语言中函数调用的汇编实现，也解释了为什么我们自己模拟的栈比C语言自身的栈消耗资源更少）</li> <li>指令1）函数调用（call）</li> <li>指令2）函数返回（ret）</li></ul> <blockquote><ul><li>call指令：(语法: call 标签)
首先：将<code>当前执行指令</code>的<code>地址</code>入栈
然后：无条件转移到由标签指示的地址的指令
Tips：和简单的跳转指令（jmp）不同，call指令保存调用之前的地址信息</li> <li>ret指令:(语法:  ret)
实现子程序的返回机制
ret指令首先：弹出栈中保存的指令地址
然后：无条件转移到保存的指令地址处执行</li></ul></blockquote> <blockquote><ul><li>用一个C语言反汇编说明（测试环境VS2012反汇编）</li></ul></blockquote> <div class="language-asm line-numbers-mode"><pre class="language-text"><code>省略——————
int test(int a,int b)
{
00D41460  push        ebp  
00D41461  mov         ebp,esp  
00D41463  sub         esp,0C0h  
00D41469  push        ebx  
00D4146A  push        esi  
00D4146B  push        edi  
00D4146C  lea         edi,[ebp-0C0h]  
00D41472  mov         ecx,30h  
00D41477  mov         eax,0CCCCCCCCh  
00D4147C  rep stos    dword ptr es:[edi]  
	return a+b;
00D4147E  mov         eax,dword ptr [a]  
00D41481  add         eax,dword ptr [b]  
}
00D41484  pop         edi  
00D41485  pop         esi  
00D41486  pop         ebx  
00D41487  mov         esp,ebp  
00D41489  pop         ebp  
00D4148A  ret 			 ;调用返回
省略------------
	int a=3;
00D413EE  mov         dword ptr [a],3  
	int b=7;
00D413F5  mov         dword ptr [b],7  
	int c=test(a,b);
00D413FC  mov         eax,dword ptr [b]  
00D413FF  push        eax  
00D41400  mov         ecx,dword ptr [a]  
00D41403  push        ecx  
00D41404  call        _test (0D4114Ah)  ;_test是函数的符号表，编译原理中讲过。此次调用test函数
00D41409  add         esp,8  
00D4140C  mov         dword ptr [c],eax  
省略------------
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><h3 id="★1-4-其他指令"><a href="#★1-4-其他指令" class="header-anchor">#</a> ★1.4.其他指令</h3> <ul><li><p>cld指令（clear Direction Flag）
无操作数指令。
将标志寄存器（flags）的DF（Direction Flag，方向标志位）置0
0表示，movsb或者movsw等指令的传送方向是正向的（从低地址到高地址）</p></li> <li><p>std指令（set Direction Flag）
无操作数指令。
将标志寄存器（flags）的DF（Direction Flag，方向标志位）置0
1表示，movsb或者movsw等指令的传送方向是反向的（从高地址到低地址）</p></li> <li><p>movsb（move string byte)
无操作数指令。
把数据从一个地方批量传送（复制）到另一个地方，是以byte为单位</p></li> <li><p>movsw（move string word)
无操作数指令。
把数据从一个地方批量传送（复制）到另一个地方，是以word（字）为单位</p></li> <li><p>movsb和movsw要是只写他，而不加rep，则它们只能执行一次
如果想要处理器自动的反复执行，那么要加上指令前缀rep(repeat)
意思是cx（count Register）不为0则反复执行，</p></li></ul> <div class="language-asm line-numbers-mode"><pre class="language-text"><code>rep mobsw
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="_02-nasm编译指令"><a href="#_02-nasm编译指令" class="header-anchor">#</a> 02.NASM编译指令</h2> <p>也就是我们所说的伪指令，不是CPU的指令</p> <p>1）db/dw声明一些数据
用伪指令db声明的数据都只有一个字节的长度
用伪指令db声明的数据都只有一个字的长度</p> <div class="language-.asm line-numbers-mode"><pre class="language-text"><code>db -1	;初始化为0xFF
dw -1	;初始化为0xFFFF
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>2）times 是一个比较实用伪指令，用来重复定义数据或指令。</p> <div class="language-asm line-numbers-mode"><pre class="language-text"><code>times 510-($-$$) db 0
dw 0xaa55	
;这段代码经常出现在 boot 磁盘 MBR 引导代码中
;目的是除了最后 2 个字节和 code 代码外的区域全部写 0 值
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>times 还可以使用在重复写某一条指令</p> <div class="language-asm line-numbers-mode"><pre class="language-text"><code>times 10 nop
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-txt line-numbers-mode"><pre class="language-text"><code>这段代码结果是重复填入了 10 条 nop 指令：

00000000  90                nop
00000001  90                nop
00000002  90                nop
00000003  90                nop
00000004  90                nop
00000005  90                nop
00000006  90                nop
00000007  90                nop
00000008  90                nop
00000009  90                nop
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="_03-cpu寄存器分类"><a href="#_03-cpu寄存器分类" class="header-anchor">#</a> 03.CPU寄存器分类</h2> <blockquote><p>CPU中寄存器大致分为两类</p></blockquote> <h3 id="_3-1-用户可见"><a href="#_3-1-用户可见" class="header-anchor">#</a> 3.1.用户可见</h3> <p><code>可以对这类寄存器编程</code>
eg.
通用寄存器组<br>
程序状态字寄存器</p> <h3 id="_3-2-用户不可见"><a href="#_3-2-用户不可见" class="header-anchor">#</a> 3.2.用户不可见</h3> <p><code>不可以对这类寄存器编程</code>
eg.<br>
存储器地址寄存器（MAR）<br>
存储器数据寄存器（MDR）<br>
指令寄存器（IR）</p></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/app.65c6717c.js" defer></script><script src="/assets/js/48.eac3805a.js" defer></script>
  </body>
</html>
